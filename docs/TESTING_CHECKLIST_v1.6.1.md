# v1.6.1 测试清单

## 测试环境准备

### 1. 启动服务

```bash
# 终端 1: 启动服务器端（必须）
cd packages/server
pnpm dev
# 应显示: Server running on http://localhost:5170

# 终端 2: 启动用户端
cd packages/app
pnpm dev
# 应显示: Local: http://localhost:5173

# 终端 3: 启动管理端
cd packages/admin
pnpm dev
# 应显示: Local: http://localhost:5174
```

### 2. 验证服务器连接

打开浏览器控制台，应看到：
- ✅ `存储管理器初始化成功 - 使用服务器端存储`
- ✅ `API 地址: http://localhost:5170/api`

如果看到错误：
- ❌ `无法连接到服务器，应用无法正常工作`
- 检查服务器是否正在运行

## 核心功能测试

### 测试 1: 用户注册和登录

**步骤**:
1. 打开用户端 `http://localhost:5173`
2. 点击"注册"
3. 输入用户名和密码
4. 完成注册

**预期结果**:
- ✅ 注册成功，自动登录
- ✅ 控制台显示用户数据已保存到服务器端
- ✅ 可以看到主界面

### 测试 2: 创建备忘录

**步骤**:
1. 登录后，点击"新建备忘录"
2. 输入标题和内容
3. 添加标签
4. 保存备忘录

**预期结果**:
- ✅ 备忘录创建成功
- ✅ 在备忘录列表中可以看到
- ✅ 数据存储在服务器端

### 测试 3: 管理端查看用户

**步骤**:
1. 打开管理端 `http://localhost:5174`
2. 使用默认管理员账号登录
   - 用户名: `admin`
   - 密码: `admin123`
3. 进入"用户管理"

**预期结果**:
- ✅ 可以看到刚才注册的用户
- ✅ 可以看到用户的备忘录数量

### 测试 4: 清除数据库（核心测试）

**步骤**:
1. 在管理端，进入"数据库管理"
2. 点击"清除数据库"
3. 确认清除
4. 刷新用户端页面

**预期结果**:
- ✅ 管理端显示"数据库已清空"
- ✅ 用户端自动退出登录
- ✅ 无法使用之前的账号登录
- ✅ 备忘录数据已被清除
- ✅ 所有数据都被清除

**这是最重要的测试！如果失败，说明存储架构修复不完整。**

### 测试 5: 数据持久化

**步骤**:
1. 注册新用户并创建备忘录
2. 关闭浏览器
3. 重新打开浏览器，访问用户端
4. 登录

**预期结果**:
- ✅ 可以正常登录
- ✅ 备忘录数据仍然存在
- ✅ 数据从服务器端加载

### 测试 6: 多设备同步

**步骤**:
1. 在浏览器 A 登录并创建备忘录
2. 在浏览器 B 使用相同账号登录

**预期结果**:
- ✅ 浏览器 B 可以看到浏览器 A 创建的备忘录
- ✅ 数据在多设备间同步

### 测试 7: 文件上传

**步骤**:
1. 创建备忘录
2. 上传图片或文件
3. 保存备忘录

**预期结果**:
- ✅ 文件上传成功
- ✅ 文件元数据和 Blob 都存储在服务器端
- ✅ 可以预览和下载文件

### 测试 8: 分享链接

**步骤**:
1. 创建备忘录
2. 创建分享链接
3. 使用分享链接访问

**预期结果**:
- ✅ 分享链接创建成功
- ✅ 可以通过链接访问备忘录
- ✅ 分享数据存储在服务器端

### 测试 9: 日志记录

**步骤**:
1. 在管理端，进入"系统监控"
2. 查看日志列表

**预期结果**:
- ✅ 可以看到系统日志
- ✅ 日志包含用户操作记录
- ✅ 日志存储在服务器端

### 测试 10: 数据导出和导入

**步骤**:
1. 创建一些测试数据
2. 在管理端导出数据
3. 清除数据库
4. 导入之前导出的数据

**预期结果**:
- ✅ 数据导出成功（JSON 格式）
- ✅ 数据导入成功
- ✅ 所有数据恢复正常

## 错误场景测试

### 测试 11: 服务器断开

**步骤**:
1. 停止服务器端
2. 刷新用户端或管理端

**预期结果**:
- ✅ 显示错误提示："无法连接到服务器"
- ✅ 不会回退到本地模式
- ✅ 应用无法正常使用

### 测试 12: 网络错误处理

**步骤**:
1. 在操作过程中断开网络
2. 尝试创建备忘录

**预期结果**:
- ✅ 显示网络错误提示
- ✅ 操作失败，不会丢失数据

## 性能测试

### 测试 13: 大量数据

**步骤**:
1. 创建 100+ 个备忘录
2. 测试列表加载速度
3. 测试搜索功能

**预期结果**:
- ✅ 列表加载流畅
- ✅ 搜索响应快速
- ✅ 无明显卡顿

### 测试 14: 大文件上传

**步骤**:
1. 上传 10MB+ 的文件
2. 测试上传速度和稳定性

**预期结果**:
- ✅ 文件上传成功
- ✅ 进度显示正常
- ✅ 无内存泄漏

## 兼容性测试

### 测试 15: 浏览器兼容性

**测试浏览器**:
- Chrome/Edge (Chromium)
- Firefox
- Safari

**预期结果**:
- ✅ 所有功能在各浏览器中正常工作
- ✅ 样式显示一致

### 测试 16: 移动端适配

**步骤**:
1. 使用移动设备或浏览器开发者工具
2. 测试响应式布局

**预期结果**:
- ✅ 移动端布局正常
- ✅ 触摸操作流畅
- ✅ 底部导航栏显示正常

## 回归测试

### 测试 17: 主题切换

**步骤**:
1. 在设置中切换主题
2. 检查所有页面

**预期结果**:
- ✅ 主题在所有页面生效
- ✅ 侧边栏主题正确
- ✅ 无样式错误

### 测试 18: 子账号管理

**步骤**:
1. 创建主账号
2. 创建子账号
3. 使用子账号登录

**预期结果**:
- ✅ 子账号创建成功
- ✅ 子账号可以登录
- ✅ 权限控制正常

## 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 测试 1: 用户注册和登录 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 2: 创建备忘录 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 3: 管理端查看用户 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| **测试 4: 清除数据库** | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | **核心测试** |
| 测试 5: 数据持久化 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 6: 多设备同步 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 7: 文件上传 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 8: 分享链接 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 9: 日志记录 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 10: 数据导出和导入 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 11: 服务器断开 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 12: 网络错误处理 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 13: 大量数据 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 14: 大文件上传 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 15: 浏览器兼容性 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 16: 移动端适配 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 17: 主题切换 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |
| 测试 18: 子账号管理 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 | |

## 测试通过标准

- ✅ 所有核心功能测试通过（测试 1-10）
- ✅ **测试 4（清除数据库）必须通过**
- ✅ 错误场景处理正确（测试 11-12）
- ✅ 无严重性能问题（测试 13-14）
- ✅ 主要浏览器兼容（测试 15）

## 已知问题

（记录测试中发现的问题）

## 测试日期

- 测试人员: 
- 测试日期: 
- 版本号: v1.6.1
