# 版本历史记录

> 自动生成于 2026/1/13 18:43:30

**总版本数：** 35

---

## 1.9.1

**发布时间：** 2026/1/13 18:43:30

**作者：** CYP

**上一版本：** 1.9.0

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 修复

- 桌面端生产环境白屏：修复 WindowManager.ts 中 index.html 路径计算错误，从 dist/main/main/ 到 dist/renderer/ 需要使用 ../../renderer/index.html
- 桌面端生产环境托盘图标不显示：修复 TrayManager.ts 中图标路径计算，生产环境从 process.resourcesPath/resources/ 加载图标
- 桌面端生产环境通知图标不显示：修复 NotificationManager.ts 中图标路径计算，与 TrayManager 保持一致
- 桌面端生产环境 CSP 策略阻止脚本执行：修复 SecurityManager.ts 中 CSP 配置，生产模式允许 unsafe-inline 以支持 Vue 打包后的脚本
- 桌面端内置服务器无法启动：修复 EmbeddedServer.ts 中服务器脚本路径查找逻辑，生产环境从 process.resourcesPath/server/ 加载
- 桌面端内置服务器依赖缺失：修复 electron-builder.config.cjs 中 extraResources 配置，添加服务器 node_modules 和 package.json 打包，排除 @types 等 devDependencies
- 桌面端构建流程缺少服务器构建：修复 desktop package.json 中 build:win/mac/linux 等命令，添加 pnpm build:server 步骤确保服务器 dist 目录存在

#### ⚡ 优化

- 桌面端开发模式检测统一：所有主进程模块使用 !app.isPackaged 替代 process.env.NODE_ENV 检测开发模式
- 桌面端内置服务器工作目录：EmbeddedServer 启动时设置 cwd 为服务器目录，确保 node_modules 正确解析

---

## 1.9.0

**发布时间：** 2026/1/14 02:00:00

**作者：** CYP

**上一版本：** 1.8.10

**变更类型：** ✨ 功能更新

### 变更内容

#### ✨ 新增功能

- 桌面应用重新设计：桌面客户端现在与网页应用功能完全一致，需要先连接服务器登录后才能使用
- 服务器连接设置向导：首次启动时引导用户选择连接模式（远程服务器或内置服务器）
- 桌面客户端设置页面：新增专门的桌面客户端设置页面，支持切换服务器、通知设置、检查更新等功能
- 桌面专用侧边栏：在系统菜单中添加桌面客户端设置入口
- 桌面专用布局组件：创建 DesktopLayout 组件，显示桌面版标识

#### ⚡ 性能

- 路由系统：桌面应用使用 Hash 模式路由以兼容 Electron file:// 协议
- 存储初始化：根据服务器连接配置动态获取 API 地址
- 会话管理：集成完整的会话验证和过期处理机制
- 主题支持：完整支持深色/浅色主题切换

#### 🔧 其他

- 技术改进：集成 Pinia、Vue Router、Element Plus，复用 web app 组件

---

## 1.8.10

**发布时间：** 2026/1/14 00:00:00

**作者：** CYP

**上一版本：** 1.8.9

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 桌面端帮助关于功能错误：修复 MenuManager.ts 中使用 require 导入 dialog 模块在 ESM 环境下报错 'require is not defined' 的问题，改为在文件顶部使用 import 语句导入
- 桌面端生产环境显示开发者工具：修复打包后的应用仍然显示开发者工具菜单的问题，使用 app.isPackaged 判断是否为生产环境，生产环境下隐藏开发者工具菜单项
- 桌面端应用图标缺失：将项目图标源文件（图片/桌面CYP-MEMO.png）复制到 resources/icon-source.png，并运行图标生成脚本生成 icon.ico、icon.icns 和各尺寸 PNG 图标
- PDF导出内容被截断：移除 PDF 导出中备忘录内容的 max-height: 300px 和 overflow: hidden 限制，确保长文本完整显示

#### 📝 文档

- Docker 文档新增登录后备忘录不显示问题的说明和解决方案：详细描述问题原因、已修复版本、临时解决方法和升级方法

---

## 1.8.9

**发布时间：** 2026/1/13 22:00:00

**作者：** CYP

**上一版本：** 1.8.8

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 生产环境容器登录后备忘录不刷新：登录成功后使用 router.replace 并添加 refresh 时间戳参数强制刷新数据，同时优化 MemoListView 的 watch 监听逻辑，使用 immediate: true 和 nextTick 确保数据立即加载
- Windows 安装包界面英文问题：在 electron-builder NSIS 配置中添加 installerLanguages: ['SimpChinese'] 确保安装程序仅使用简体中文界面
- PDF导出长文字显示不完整：重写 exportToPDF 函数，移除 200 字符限制，实现分页导出（每页3条备忘录），支持长文本完整显示和自动换行
- Excel导出优先级显示英文：在 exportToExcel 函数中添加优先级中文映射（low->低, medium->中, high->高），确保导出的 Excel 文件中优先级显示为中文
- 导入导出格式保持一致：新增 stripHtmlTagsPreserveLineBreaks 和 textToHtml 函数，确保备忘录的回车换行和样式在导入导出时保持一模一样，JSON导出保留原始HTML格式，Excel导出保留换行符，Excel导入自动转换换行为HTML格式

#### ⚡ 性能

- PDF导出分页优化：每页显示3条备忘录，自动计算总页数，每页显示页码信息，内容过长时自动缩放适应页面
- 导入导出模板优化：JSON和Excel模板中添加多行文本示例，展示格式保持功能

---

## 1.8.8

**发布时间：** 2026/1/13 20:00:00

**作者：** CYP

**上一版本：** 1.8.7

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 登录后备忘录不刷新：添加 watch 监听 authStore.currentUser 变化，用户登录后立即加载备忘录数据
- PDF导出中文乱码：使用 html2canvas 将中文内容渲染为图片再导出PDF，完美支持中文显示
- Excel模板优先级显示英文：将模板中的优先级从 medium/high 改为中文 中/高
- Excel导入优先级识别：支持中文优先级（低/中/高）和英文优先级（low/medium/high）的自动识别转换
- 备忘录列表内容换行显示：支持回车换行的文字内容正确显示，将 HTML 换行标签转换为实际换行
- 备忘录列表内容遮挡：优化卡片高度和标签区域宽度，修复内容被遮挡的问题

#### ⚡ 性能

- PDF导出样式优化：使用中文标题、优先级标签、标签显示，导出文件名使用中文日期格式

---

## 1.8.7

**发布时间：** 2026/1/13 04:00:00

**作者：** CYP

**上一版本：** 1.8.6

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 备忘录修改失败(404错误)：服务器端添加 /api/memo-history POST 路由和 memo_history 数据库表
- 分享链接复制失败：ShareManager 添加 execCommand 回退方案，兼容非安全上下文(HTTP)环境
- 分享访问次数显示为0：服务器端实现 updateShare、getShareById、getShareByCode 方法
- 数据导入后不刷新：导入成功后调用 memoStore.loadMemos() 触发UI刷新
- 备忘录列表显示遮挡：优化 memo-title、memo-content、memo-card、memo-tags 的CSS样式
- PDF导出乱码：重写 exportToPDF 函数，使用英文表头，清理HTML标签，优化表格布局
- Excel导出包含HTML标签：添加 stripHtmlTags 函数清理导出内容中的HTML标签

#### ⚡ 性能

- 剪贴板复制兼容性：支持 navigator.clipboard API 和 document.execCommand 两种方式

---

## 1.8.6

**发布时间：** 2026/1/12 01:53:58

**作者：** CYP

**上一版本：** 1.8.5

**变更类型：** 📦 其他更新

### 变更内容

- 无详细变更记录

---

## 1.8.6

**发布时间：** 2026/1/13 02:00:00

**作者：** CYP

**上一版本：** 1.8.5

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- Windows 桌面端本地构建：修复 .npmrc 镜像配置，使用 npmmirror 替代华为云镜像解决 better-sqlite3 和 keytar 预构建二进制下载失败问题
- better-sqlite3 预构建二进制：修复华为云镜像返回损坏文件（incorrect header check）导致构建失败
- keytar 预构建二进制：添加 keytar_binary_host 配置指向 npmmirror，解决 GitHub 连接重置（ECONNRESET）导致下载失败
- electron-builder winCodeSign：手动预解压 winCodeSign-2.6.0.7z 到缓存目录，绕过 Windows 普通用户无法创建符号链接的权限限制
- 桌面端图标尺寸：构建前运行 create-placeholder-icons.mjs 生成 256x256 占位图标，修复 icon.ico must be at least 256x256 错误

#### ⚡ 性能

- pnpm 版本兼容性：放宽 engines 配置从固定版本改为 node>=20 和 pnpm>=8，支持更多开发环境
- 原生模块自动构建：添加 pnpm.onlyBuiltDependencies 配置，自动批准 better-sqlite3、keytar、electron、esbuild、sharp 的构建脚本执行
- npm 镜像源统一：使用 npmmirror（淘宝源）作为 npm、Electron、原生模块的镜像源，提升国内网络环境下载速度和稳定性

---

## 1.8.5

**发布时间：** 2026/1/13 00:00:00

**作者：** CYP

**上一版本：** 1.8.4

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 跨平台开发环境指南：新增 docs/CROSS_PLATFORM_DEV.md 文档，详细说明 Windows/macOS/Linux/WSL2/Docker 环境下的开发配置
- Linux/macOS 开发启动脚本：新增 dev.sh 脚本，与 Windows 的 dev.bat 对应

#### 🐛 问题修复

- 磁盘空间检测跨平台兼容：修复 macOS 不支持 df -B1 参数的问题，Windows 优先使用 PowerShell 替代已弃用的 wmic 命令
- 管理端生产环境部署：修复 Vite 配置中 base 路径判断逻辑，使用 command === 'build' 替代 process.env.NODE_ENV 确保生产构建时正确设置 /admin/ 路径
- SPA 路由回退完善：修复 /admin 精确路径重定向，正确排除管理端路由避免被用户端捕获
- 数据库初始化时序：重构 sqlite-database.ts 数据路径初始化为延迟加载，避免配置未加载时的路径错误
- 版本号读取跨环境兼容：支持开发环境、生产环境、Docker 容器等多种路径查找 package.json

#### ⚡ 性能

- 开发脚本跨平台优化：scripts/dev.js 支持跨平台进程终止，正确处理 Windows 的 pnpm.cmd 命令
- 数据目录智能检测：根据平台自动选择合适的默认数据目录（Windows/macOS/Linux 各有不同路径）
- Vite 开发服务器配置增强：添加 WSL2/Docker 环境的 HMR 和文件监听配置说明

---

## 1.8.4

**发布时间：** 2026/1/12 22:00:00

**作者：** CYP

**上一版本：** 1.8.3

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 服务器端统一日志模块：新增 logger.ts 日志工具，支持日志级别控制（debug/info/warn/error），根据 LOG_LEVEL 环境变量自动过滤日志输出
- 服务器端 TypeScript 类型定义：新增 types.ts 类型定义文件，为 Admin、User、Memo、FileRecord、Share、LogEntry 等实体提供完整的接口定义

#### 🐛 问题修复

- 生产模式敏感信息泄露：修复默认管理员密码在生产环境控制台明文输出的安全问题，改用 logger.sensitive() 仅在开发模式输出
- TypeScript 严格模式 any 类型：消除 sqlite-database.ts 中所有 any 类型，使用具体的接口类型替代，符合 TypeScript 严格模式要求

#### ⚡ 性能

- 服务器端日志规范化：将所有 console.log/error 调用替换为统一的 logger 模块，支持结构化日志输出和上下文信息
- 数据库操作类型安全：为所有数据库 CRUD 方法添加明确的参数和返回值类型定义，提升代码可维护性和 IDE 智能提示
- 迁移脚本日志优化：migrate-to-sqlite.ts 使用封装的 log() 函数统一输出，改进错误信息格式

#### 🔧 其他

- 代码规范符合开发文档：服务器端代码现在完全符合 docs/DEVELOPMENT.md 中定义的开发规范

---

## 1.8.3

**发布时间：** 2026/1/12 18:00:00

**作者：** CYP

**上一版本：** 1.8.2

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 注册时 btoa Unicode 编码错误：修复注册输入中文用户名/密码时出现 'Failed to execute btoa on Window: The string to be encoded contains characters outside of the Latin1 range' 错误
- Web Crypto API 类型兼容性：修复 TypeScript 严格模式下 Uint8Array 与 BufferSource 类型不兼容的问题，使用新建 ArrayBuffer 方式避免 SharedArrayBuffer 类型冲突

#### ⚡ 性能

- 加密工具全面兼容性增强：新增 stringToUtf8Bytes 函数手动实现 UTF-8 编码，兼容不支持 TextEncoder 的旧环境
- Base64 编解码兼容性：新增 base64ToUint8Array 函数，支持 btoa/atob、Node.js Buffer 和手动实现三种方式，确保在各种环境下正常工作
- Web Crypto API 检测增强：改进 isWebCryptoAvailable 检测逻辑，使用 try-catch 包装避免在某些环境下抛出异常
- 飞牛 NAS (J1900) 兼容性：针对低端 NAS 设备优化加密函数，确保在 HTTP 环境和旧版浏览器中正常运行

#### 🔧 其他

- Docker 镜像版本更新：Dockerfile 中的默认版本号更新为 1.8.3

---

## 1.8.2

**发布时间：** 2026/1/12 02:00:00

**作者：** CYP

**上一版本：** 1.8.1

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 桌面端定时检查更新：UpdateManager 新增 startAutoCheck/stopAutoCheck 方法，支持每小时自动检查更新
- 桌面端更新日志显示：更新通知组件新增更新日志弹窗，支持 Markdown 格式渲染
- Web端/Admin端更新重试机制：版本检测失败时自动重试最多3次，30秒间隔
- Web端/Admin端更新日志显示：新增更新日志对话框，显示版本号、发布日期和更新内容
- Docker更新阿里云镜像支持：Docker更新对话框新增阿里云镜像源选项

#### ⚡ 性能

- Docker环境检测优化：改进Docker环境检测逻辑，支持多种检测方式（端口、localStorage、meta标签、hostname）
- 更新通知UI优化：改进更新通知样式，添加当前版本显示，优化深色主题和移动端适配
- 桌面端UpdateManager增强：添加检查状态跟踪、上次检查时间记录、最新更新信息缓存
- 复制命令降级方案：剪贴板API不可用时使用execCommand作为备用方案

---

## 1.8.1

**发布时间：** 2026/1/12 00:00:00

**作者：** CYP

**上一版本：** 1.8.0

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- Docker 生产模式启动失败：修复服务器入口文件中 __dirname 路径解析问题，使用 fileURLToPath 替代 new URL().pathname
- Web Crypto API 兼容性：修复 crypto.subtle.importKey 在某些环境下未定义的问题，添加完整的环境检测和备用方案
- 静态文件服务：添加静态文件目录存在性检查，避免目录不存在时服务器崩溃
- 生产模式 API 路径：前端使用相对路径 /api 而非硬编码 localhost:5170，修复 Docker 容器外部访问问题
- 服务器网络绑定：绑定到 0.0.0.0 而非 localhost，允许外部网络访问

#### ⚡ 性能

- Docker 镜像优化：添加 bash 和 curl 工具，改进健康检查和终端连接支持
- 加密工具增强：为 hashPassword、verifyPassword、generateToken、generateUUID 添加完整的错误处理和备用方案
- 容器启动日志：添加详细的启动信息输出，便于调试

---

## 1.8.0

**发布时间：** 2026/1/11 22:00:00

**作者：** CYP

**上一版本：** 1.7.11

**变更类型：** ✨ 功能更新

### 变更内容

#### ✨ 新增功能

- 桌面端核心功能完成：窗口管理、系统托盘、全局快捷键、本地缓存、离线同步、通知系统、自动更新
- 桌面端安全增强：凭证管理器使用系统安全存储、AES-256 本地数据加密、HTTPS 强制、CSP 内容安全策略
- 桌面端跨平台支持：Windows/macOS/Linux 平台特定功能、统一拖放处理、跨平台路径处理
- 桌面端服务器连接：支持远程服务器和内置服务器两种模式、首次启动配置向导
- 桌面端构建配置：electron-builder 多平台打包、代码签名配置、GitHub Releases 自动发布

#### 📝 文档

- 桌面端文档完善：BUILD.md 构建指南、README.md 功能说明、设计文档和任务列表更新

---

## 1.7.11

**发布时间：** 2026/1/11 20:00:00

**作者：** CYP

**上一版本：** 1.7.10

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 桌面端核心功能完成：窗口管理、系统托盘、全局快捷键、本地缓存、离线同步、通知系统、自动更新
- 桌面端安全增强：凭证管理器使用系统安全存储、AES-256 本地数据加密、HTTPS 强制、CSP 内容安全策略
- 桌面端跨平台支持：Windows/macOS/Linux 平台特定功能、统一拖放处理、跨平台路径处理
- 桌面端服务器连接：支持远程服务器和内置服务器两种模式、首次启动配置向导
- 桌面端构建配置：electron-builder 多平台打包、代码签名配置、GitHub Releases 自动发布
- 全端版本更新检测：所有端（桌面端、Web用户端、Web管理端、Docker）都支持自动检测新版本并提示更新
- 桌面端自动更新：集成 electron-updater，启动时检查 GitHub Releases，后台下载更新并提示安装
- Web 端更新提示：每 5 分钟检测服务器版本，发现新版本在页面顶部显示提示条
- Docker 更新支持：自动检测 Docker 环境，显示 Watchtower 自动更新和手动更新两种方式
- 多镜像源支持：Docker 更新命令支持 Docker Hub 和 GHCR 两个镜像源
- 一键发布脚本：整合版本更新工具和 Git 操作，支持 patch/minor/major 版本发布
- GitHub Actions 自动发布：创建 tag 后自动构建所有端并发布到 GitHub Releases
- 服务器版本 API：新增 /api/version/latest 端点，从 GitHub Releases 获取最新版本信息

#### 📝 文档

- 桌面端文档完善：BUILD.md 构建指南、README.md 功能说明、设计文档和任务列表更新
- 发布指南文档：新增 docs/RELEASE.md，详细说明发布流程和各端更新方式

---

## 1.7.10

**发布时间：** 2026/1/11 16:00:00

**作者：** CYP

**上一版本：** 1.7.9

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- Docker 容器数据目录权限问题：修复在飞牛 NAS 等设备上使用绑定挂载时出现 EACCES permission denied 错误

#### ✨ 新增功能

- Docker 入口脚本：新增 entrypoint.sh 处理数据目录权限，支持 PUID/PGID 环境变量配置运行用户
- 多 NAS 系统支持：支持飞牛 NAS、群晖、威联通、铁威马、Unraid 等多种 NAS 系统的 Docker 部署

#### ⚡ 性能

- 错误提示优化：数据目录权限错误时提供详细的解决方案和各 NAS 系统的配置示例
- Docker 镜像优化：安装 su-exec 工具支持运行时权限切换，数据目录默认设置宽松权限

#### 📝 文档

- Docker 文档更新：添加各 NAS 系统的部署指南和权限问题排查方法

---

## 1.7.9

**发布时间：** 2026/1/10 23:49:46

**作者：** CYP

**上一版本：** 1.7.8

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 创建子账号错误提示优化：输入主账号用户名时显示友好提示，而非API请求失败400错误
- 系统日志按级别筛选：修复管理端系统监控中按级别筛选日志不工作的问题，新增getLogsByLevel方法和API端点

#### ✨ 新增功能

- 主账号和子账号备忘录共享：主账号可以看到所有子账号创建的备忘录，子账号也可以看到主账号的备忘录
- 备忘录显示创建人信息：备忘录列表中显示创建人用户名和创建日期，方便区分不同账号的备忘录

#### ⚡ 性能

- 界面版权信息中文化：删除所有界面版权信息中的英文内容，统一使用中文显示
- 备忘录数据隔离：子账号可以看到同一主账号下其他子账号的备忘录，不同主账号之间的数据完全隔离互不可见

---

## 1.7.8

**发布时间：** 2026/1/10 23:24:44

**作者：** CYP

**上一版本：** 1.7.8

**变更类型：** 🔧 日常维护

### 变更内容

- 无详细变更记录

---

## 1.7.7

**发布时间：** 2026/1/10 23:01:25

**作者：** CYP

**上一版本：** 1.7.6

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.7.6

**发布时间：** 2026/1/10 22:41:45

**作者：** CYP

**上一版本：** 1.7.5

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.7.5

**发布时间：** 2026/1/10 22:36:25

**作者：** CYP

**上一版本：** 1.7.4

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.7.4

**发布时间：** 2026/1/10 22:25:55

**作者：** CYP

**上一版本：** 1.7.3

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.7.3

**发布时间：** 2026/1/10 21:56:50

**作者：** CYP

**上一版本：** 1.7.2

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 版权信息分行展示：所有界面的版权信息改为分行展示版和中英融合版，新增copyrightLines getter

#### 🐛 问题修复

- 管理端用户删除功能：修复用户管理中删除普通用户的功能，服务器端自动删除用户及其所有关联数据
- 数据库清理功能：修复管理端数据库清理功能在远程模式下不工作的问题，新增服务器端清理API

#### ⚡ 性能

- 远程存储适配器：扩展RemoteStorageAdapter支持cleanDeletedMemos、cleanOrphanedFiles、performCleanup方法

---

## 1.7.2

**发布时间：** 2026/1/10 21:35:12

**作者：** CYP

**上一版本：** 1.7.1

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.7.1

**发布时间：** 2026/1/10 21:20:35

**作者：** CYP

**上一版本：** 1.7.0

**变更类型：** 🐛 问题修复

### 变更内容

- 无详细变更记录

---

## 1.6.2

**发布时间：** 2026/1/10 20:27:19

**作者：** CYP

**上一版本：** 1.6.1

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 管理员登录失败：修复远程模式下管理员登录时密码验证失败的问题，服务器端不返回passwordHash导致前端无法验证
- 服务器端API缺失：添加日志相关的API端点 (POST/GET/DELETE /api/logs)，修复日志记录失败的问题
- 清空数据API路径错误：修正RemoteStorageAdapter中clearAllData方法的API路径从/data改为/data/clear

#### ✨ 新增功能

- 管理员登录方法：在IStorageAdapter接口中新增adminLogin方法，支持本地和远程两种登录模式

#### ⚡ 性能

- 启动脚本优化：dev.bat自动启动服务器端，无需手动启动多个进程
- 自动打开浏览器：关闭Vite开发服务器的自动打开浏览器功能，避免启动时打开多个标签页
- 清空数据库确认文本：将确认文本从英文"CLEAR"改为中文"确认"，提升用户体验

---

## 1.6.1

**发布时间：** 2026/1/10 19:49:44

**作者：** CYP

**上一版本：** 1.6.0

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 子账号列表 API：在服务器端实现 getSubAccounts 方法，修复用户端账号管理界面加载子账号列表失败的问题
- 主题设置全局生效：将所有组件和视图的深色主题样式从 @media (prefers-color-scheme: dark) 改为 [data-theme='dark']
- 管理端用户列表刷新：添加刷新按钮和 onActivated 生命周期钩子，清除数据库后能正确刷新用户列表
- PDF 导出中文格式：修复备忘录数据管理界面 PDF 导出功能的英文文本

#### ⚡ 性能

- 主题样式统一：修复了用户端和管理端所有组件和视图的主题支持

---

## 1.6.0

**发布时间：** 2026/1/10 19:26:42

**作者：** CYP

**上一版本：** 1.5.1

**变更类型：** ✨ 功能更新

### 变更内容

#### ✨ 新增功能

- 后端 API 服务器：新增独立的后端服务 (packages/server)，支持 App 和 Admin 共享数据
- JSON 文件存储：后端使用 JSON 文件存储数据，适用于本地和 NAS/容器环境
- 管理员系统：独立的管理员账号体系，与用户账号完全分离
- 默认管理员：系统启动时自动创建默认管理员 (admin/admin123)
- 存储适配器架构：支持本地存储 (IndexedDB) 和远程存储 (REST API) 两种模式
- RemoteStorageAdapter：通过 REST API 与后端通信的存储适配器
- 数据导入导出 API：支持从旧数据迁移到新后端

#### ⚡ 性能

- UserDAO 重构：使用存储管理器，支持本地和远程存储切换
- App 和 Admin 配置：两端都配置为连接后端 API (端口 5170)

#### 🐛 问题修复

- 跨端口数据隔离问题：通过共享后端 API 解决 IndexedDB 按域名隔离的问题

---

## 1.4.7

**发布时间：** 2026/1/10 17:22:27

**作者：** CYP

**上一版本：** 1.4.6

**变更类型：** 🐛 问题修复

### 变更内容

#### ✨ 新增功能

- 账号密码注册时自动生成个人令牌：用户注册时系统自动为其生成唯一的个人令牌
- 令牌显示在注册成功页面：注册完成后立即显示自动生成的令牌，用户可复制保存
- 令牌全局应用：自动生成的令牌可用于登录系统，与令牌注册用户享受同等权限

#### ⚡ 性能

- 注册流程：账号密码注册和令牌注册现在都能获得个人令牌，提升用户体验
- 令牌管理：所有用户（无论注册方式）都拥有个人令牌，便于全局管理和引用
- 注册成功提示：显示自动生成的令牌，提醒用户保存以备后用

---

## 1.4.6

**发布时间：** 2026/1/10 17:10:29

**作者：** CYP

**上一版本：** 1.4.5

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 表单字段缺少id属性：为所有el-input元素添加唯一的id属性
- 表单标签关联问题：确保label的for属性与表单字段的id匹配
- 浏览器自动填充问题：添加id属性使浏览器能正确识别表单字段
- 无障碍访问问题：改进屏幕阅读器对表单的识别

#### ⚡ 性能

- AccountsView表单：为创建子账号表单的所有输入字段添加id
- ProfileView表单：为个人资料编辑表单的所有输入字段添加id
- ProfileView安全问题表单：为安全问题答案输入字段添加id
- ProfileView密码修改表单：为密码修改表单的所有输入字段添加id

---

## 1.4.5

**发布时间：** 2026/1/10 16:50:00

**作者：** CYP

**上一版本：** 1.4.4

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 创建子账号不能创建的问题：bcryptjs在浏览器中尝试使用Node.js crypto模块导致失败
- 密码哈希函数浏览器兼容性：实现浏览器环境中的PBKDF2密码哈希替代方案
- 密码验证函数浏览器兼容性：实现浏览器环境中的PBKDF2密码验证替代方案
- 表单验证错误：confirmPassword验证器未正确处理空值情况
- Vite配置：添加ssr.noExternal配置确保bcryptjs在浏览器中正确处理

#### ⚡ 性能

- 密码哈希实现：自动检测运行环境，浏览器中使用Web Crypto API，Node.js中使用bcryptjs
- 密码验证实现：支持两种环境的密码验证，确保兼容性
- 表单验证规则：改进confirmPassword验证器的错误处理逻辑

---

## 1.4.4

**发布时间：** 2026/1/10 16:30:00

**作者：** CYP

**上一版本：** 1.4.3

**变更类型：** 🐛 问题修复

### 变更内容

#### 🐛 问题修复

- 导入导出文件编码问题：JSON导出使用UTF-8编码，Excel导入改用ArrayBuffer处理，PDF导出文件名改为英文避免乱码
- ShareManageView 加载分享链接失败：修复 authStore.user?.id 应为 authStore.currentUser?.id 的错误
- AccountsView 缺少 UserIf 组件注册：修复模板中使用 <User /> 而未正确导入的问题，改为 <UserIcon />
- Element Plus checkbox 弃用警告：将所有 el-checkbox 的 :label 属性改为 :value 属性，适配 Element Plus 3.0
- crypto 模块浏览器兼容性问题：创建 generateUUID() 函数替代 crypto.randomUUID()，支持所有浏览器环境

#### ⚡ 性能

- 文件导入导出流程：JSON 导出使用 TextEncoder 确保 UTF-8 编码，Excel 导入使用 ArrayBuffer 提高兼容性
- UUID 生成函数：添加 fallback 机制，优先使用 crypto.randomUUID()，不可用时手动生成 UUID v4
- 所有 crypto.randomUUID() 调用：统一使用 generateUUID() 函数，提高代码可维护性

---

## 1.3.0

**发布时间：** 2026/1/10 15:54:08

**作者：** CYP

**上一版本：** 1.3.0

**变更类型：** 🔧 日常维护

### 变更内容

- 无详细变更记录

---

## 1.2.0

**发布时间：** 2026/1/10 15:39:03

**作者：** CYP

**上一版本：** 1.1.1

**变更类型：** ✨ 功能更新

### 变更内容

- 无详细变更记录

---

## 1.1.0

**发布时间：** 2026/1/10 15:07:48

**作者：** CYP

**上一版本：** 1.0.2

**变更类型：** ✨ 功能更新

### 变更内容

- 无详细变更记录

---

## 统计信息

- **总版本数：** 35
- **主版本更新：** 0 次
- **次版本更新：** 5 次
- **补丁更新：** 27 次
- **首个版本：** 1.1.0
- **最新版本：** 1.9.0
- **首次发布：** 2026/1/10 15:07:48
- **最后更新：** 2026/1/14 02:00:00
