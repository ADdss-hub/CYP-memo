directories:
  output: release/${version}
  buildResources: resources
appId: com.cyp.memo
productName: CYP-memo
copyright: Copyright © 2024 CYP
files:
  - filter:
      - dist/**/*
      - package.json
      - '!**/*.map'
      - '!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme}'
      - '!**/node_modules/*/{test,__tests__,tests,powered-test,example,examples}'
      - '!**/node_modules/*.d.ts'
      - '!**/node_modules/.bin'
extraResources:
  - from: resources/
    to: resources/
    filter:
      - '**/*'
      - '!.gitkeep'
asar: true
asarUnpack:
  - '**/node_modules/better-sqlite3/**/*'
  - '**/node_modules/keytar/**/*'
win:
  target:
    - target: nsis
      arch:
        - x64
        - ia32
    - target: portable
      arch:
        - x64
  icon: resources/icon.ico
  signingHashAlgorithms:
    - sha256
  signDlls: true
  requestedExecutionLevel: asInvoker
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: CYP-memo
  installerIcon: resources/icon.ico
  uninstallerIcon: resources/icon.ico
  installerHeaderIcon: resources/icon.ico
  language: '2052'
  runAfterFinish: true
  deleteAppDataOnUninstall: false
portable:
  artifactName: ${productName}-${version}-portable.${ext}
mac:
  target:
    - target: dmg
      arch:
        - x64
        - arm64
    - target: zip
      arch:
        - x64
        - arm64
  icon: resources/icon.icns
  category: public.app-category.productivity
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: resources/entitlements.mac.plist
  entitlementsInherit: resources/entitlements.mac.plist
  notarize: false
dmg:
  contents:
    - x: 130
      'y': 220
    - x: 410
      'y': 220
      type: link
      path: /Applications
  window:
    width: 540
    height: 380
linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
    - target: rpm
      arch:
        - x64
    - target: tar.gz
      arch:
        - x64
  icon: resources/icons
  category: Office
  synopsis: CYP-memo 备忘录应用
  description: 一个简洁高效的备忘录管理应用，支持离线使用和多设备同步。
  desktop:
    Name: CYP-memo
    Comment: 备忘录管理应用
    Categories: Office;Utility;
    Keywords: memo;note;备忘录;笔记;
    StartupWMClass: cyp-memo
deb:
  depends:
    - libgtk-3-0
    - libnotify4
    - libnss3
    - libxss1
    - libxtst6
    - xdg-utils
    - libatspi2.0-0
    - libuuid1
    - libsecret-1-0
rpm:
  depends:
    - gtk3
    - libnotify
    - nss
    - libXScrnSaver
    - libXtst
    - xdg-utils
    - at-spi2-core
    - libuuid
    - libsecret
appImage:
  artifactName: ${productName}-${version}.${ext}
  desktop:
    Name: CYP-memo
    Comment: 备忘录管理应用
    Categories: Office;Utility;
publish:
  - provider: github
    owner: ADdss-hub
    repo: CYP-memo
    releaseType: release
generateUpdatesFilesForAllChannels: true
afterSign: scripts/notarize.cjs
buildDependenciesFromSource: false
nodeGypRebuild: false
npmRebuild: true
electronVersion: 28.3.3
